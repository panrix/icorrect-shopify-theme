<section class="pdp-sustain-repair-{{ section.id }}">
  <div class="pdp-sustain-wrapper">
    <div class="pdp-sustain-row">
      <div class="pdp-sustain-info-col" style="background-color: {{ section.settings.bg }}">
        <div class="sustain-top-info">
          <h2>{{ section.settings.heading }}</h2>
          <p>{{ section.settings.details }}</p>
        </div>
        <div class="sustain-icon-heading-row">
          <img src="{{ section.settings.icon | img_url: 'master' }}">
          <h3>{{ section.settings.subheading }}</h3>
        </div>
        <div class="sustain-main-info">
          {{ section.settings.info }}
        </div>
        <div class="sustain-main-btn">
          <a href="{{ section.settings.link }}">{{ section.settings.btn }}</a>
        </div>
      </div>
      <div class="pdp-sustain-img-col">
        <img class="{% if section.settings.enable_video %}hide-img{% endif %}" src="{{ section.settings.img | img_url: 'master' }}">
        {% if section.settings.enable_video %}
        <div class="vid-wrap">
          <span class="icon-btn">
            <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><path d="M23 12l-22 12v-24l22 12zm-21 10.315l18.912-10.315-18.912-10.315v20.63z"/></svg>
          </span>
          <video class="cust_video cust_video_auto" poster="{{ section.settings.video_poster | img_url: 'master' }}" width="100%" height="auto" autoplay="false" loop="true"  playsinline="" data-src-all="image" 
            src="{{ section.settings.video }}">
           </video>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

<style>
  .vid-wrap{
    position: relative;
    width: 100%;
    height: 100%;
  }
  .vid-wrap span{
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #fff;
    border-radius: 50%;
    padding: 20px;
    cursor: pointer;
    z-index: 99;
  }
  .vid-wrap span svg{
    width: 30px;
    height: 30px;
    vertical-align: middle;
  }
  .pdp-sustain-wrapper .hide-img{ display: none;}
  .pdp-sustain-wrapper{
    width: 100%;
  }
  .pdp-sustain-row{
    display: flex;
    align-items: stretch;
    justify-content: space-between;
    flex-wrap: wrap;
  }
  .pdp-sustain-info-col{
    flex: 50%;
    max-width: 50%;
    padding: 80px 25px 80px 80px;
    text-align: left;
  }
  .sustain-top-info{
    padding-bottom: 30px;
  }
  .sustain-top-info h2{
    color: #fff;
font-size: 28px;
font-weight: 600;
line-height: 45.67px;
text-align: left;
margin: 0;
    padding: 0;
    padding-bottom: 8px;
  }
  .sustain-top-info p{
    color: #fff;
font-size: 17px;
font-weight: 400;
line-height: 1.6;
letter-spacing: 0;
text-align: left;
margin: 0;
    padding: 0;
  }
  .sustain-icon-heading-row{
    display: flex;
    align-items: center;
    column-gap: 8px;
    padding-bottom: 15px;
  }
  .sustain-icon-heading-row img{
    max-width: 28px;
    height: auto;
  }
  .sustain-icon-heading-row h3{
    color: #fff;
    font-size: 18px;
    font-weight: 600;
    line-height: 19px;
    letter-spacing: 0.05em;
    text-align: left;
    max-width: calc(100% - 28px);
    margin: 0;
    padding: 0;
  }
  .sustain-main-info{
    text-align: left;
    padding-bottom: 8px;
  }
  .sustain-main-info p{
    color: #fff;
    font-size: 16px;
    font-weight: 400;
    line-height: 1.7;
    letter-spacing: 0;
    text-align: left;
    margin: 0 0 1rem;
    padding: 0;
  }

  .sustain-main-info p:last-child{
    margin-bottom: 0;
  }
  .pdp-sustain-img-col{
    flex: 50%;
    max-width: 50%;
  }
  .pdp-sustain-img-col img,
  .pdp-sustain-img-col video{
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
  .sustain-main-btn{
    text-align: left;
    
  }
  .sustain-main-btn a{
    display: inline-block;
    width: 124px;
    text-align: center;
    padding: 8.836px 0px;
    background-color: #fff;
    font-size: 16px;
    font-weight: 400;
    line-height: 25.34px;
    color: #586F6B;
    border-radius: 3px;
    text-decoration: none;
  }
  @media(min-width: 768px){
    .pdp-sustain-info-col{
    display: flex;
  flex-direction: column;
  justify-content: center; 
    }
  }
  @media(max-width: 767px){
    .pdp-sustain-img-col{
    flex: 100%;
    max-width: 100%;
  }
    .pdp-sustain-info-col{
    flex: 100%;
    max-width: 100%;
    padding: 30px;
    }
    .pdp-sustain-row{
      flex-direction: column-reverse;
    }
    .sustain-top-info h2{
        font-size: 24px;
        font-weight: 600;
        line-height: 36px;
        text-align: left;

    }
  }
</style>

<script>
  document.querySelector(".icon-btn").addEventListener("click", () => {
    const video = document.querySelector("video");
    video.play();
    video.setAttribute("controls", "true");
    document.querySelector(".icon-btn").style.display = "none";
  });
</script>

{% schema %}
  {
    "name": "Sustainable Repair",
    "settings": [
      {
        "type": "header",
        "content": "Left Column"
      },
      {
        "type": "color",
        "id": "bg",
        "label": "Background Color",
        "default": "#586F6B"
      },
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Sustainability in Repair"
      },
      {
        "type": "text",
        "id": "details",
        "label": "Details",
        "default": "Lorem ipsum dolor sit amet, consectetur "
      },
      {
        "type": "image_picker",
        "id": "icon",
        "label": "Icon"
      },
      {
        "type": "text",
        "id": "subheading",
        "label": "Sub Heading",
        "default": "Lorem ipsum"
      },
      {
        "type": "richtext",
        "id": "info",
        "label": "Main Details",
        "default": "<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </p>"
      },
      {
        "type": "url",
        "id": "link",
        "label": "Button Link"
      },
      {
        "type": "text",
        "id": "btn",
        "label": "Button Label",
        "default": "Learn More"
      },
      {
        "type": "header",
        "content": "Right Column"
      },
      {
        "type": "image_picker",
        "id": "img",
        "label": "Image"
      },
      {
       "type": "checkbox",
       "id": "enable_video",
       "label": "Enable Video",
       "default": false
     },
      {
        "type": "image_picker",
        "id": "video_poster",
        "label": "Video Poster"
      },
     {
        "type": "url",
        "id": "video",
        "label": "Upload MP4 Video URL"
     }
    ],
    "presets": [
      {
        "name": "Sustainable Repair", 
        "category": "section"
      }
    ]
  }
{% endschema %}