{{ 'section-contact-form.css' | asset_url | stylesheet_tag }}

{%- style -%}
  /* Enhanced Contact Form - Mixed Logic */
  .contact-section-{{ section.id }}{
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    width: 100%;

    /* Type scale */
    --cf-text: 15px;
    --cf-h1: 44px;
    --cf-h2: 26px;

    /* Spacing */
    --cf-gap-4: 24px;
    --cf-gap-5: 32px;
    --cf-gap-6: 48px;

    /* Radii */
    --cf-radius: 8px;

    /* Panels */
    color: {{ section.settings.text_color }};
  }

  .contact-wrapper{
    display:flex;
    flex-direction:column;
    width:100%;
    min-height:85vh;
  }
  @media screen and (min-width: 990px){
    .contact-wrapper{ flex-direction:row; }
  }

  /* Left Info Panel */
  .contact-info-panel{
    background-color: {{ section.settings.info_panel_bg }};
    padding: var(--cf-gap-6) var(--cf-gap-5);
    display:flex;
    flex-direction:column;
    justify-content:center;
    gap: var(--cf-gap-5);
  }
  @media screen and (min-width: 990px){
    .contact-info-panel{ width:40%; padding: 64px 56px 64px 8%; }
  }

  .contact-info-heading{
    font-size: var(--cf-h1);
    font-weight: 700;
    line-height: 1.12;
    margin:0;
    letter-spacing: -0.02em;
  }

  .contact-info-description{
    color: {{ section.settings.muted_text_color }};
    font-size: 18px;
    line-height: 1.6;
    margin:0;
    max-width: 520px;
  }

  .contact-details{
    display:flex;
    flex-direction:column;
    gap: var(--cf-gap-4);
  }

  .contact-detail-item{
    display:flex;
    align-items:flex-start;
    gap: 16px;
  }

  .contact-detail-icon{
    width: 42px;
    height: 42px;
    display:flex;
    align-items:center;
    justify-content:center;
    background-color: {{ section.settings.accent_color }}15;
    border-radius: var(--cf-radius);
    flex-shrink:0;
    margin-top: 2px;
  }
  .contact-detail-icon svg{
    width: 18px;
    height: 18px;
    color: {{ section.settings.accent_color }};
  }

  .contact-detail-label{
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: {{ section.settings.muted_text_color }};
    margin: 0 0 6px 0;
  }

  .contact-detail-value{
    color: {{ section.settings.text_color }};
    font-size: 16px;
    font-weight: 500;
    line-height: 1.35;
    margin:0;
    text-decoration:none;
  }

  /* Opening Hours Grid */
  .hours-grid {
    display: grid;
    grid-template-columns: 110px 1fr;
    gap: 4px 12px;
    font-size: 15px;
    font-weight: 500;
    color: {{ section.settings.text_color }};
  }
  .hours-day { color: {{ section.settings.muted_text_color }}; }
  .hours-time { text-align: left; }

  /* Right Form Panel */
  .contact-form-panel{
    flex:1;
    padding: var(--cf-gap-6) var(--cf-gap-5);
    display:flex;
    align-items:center;
    justify-content:flex-start;
    background-color: {{ section.settings.form_bg }};
  }
  @media screen and (min-width: 990px){
    .contact-form-panel{ padding: 64px 8% 64px 56px; }
  }

  .contact-form-container{
    width:100%;
    max-width: 640px;
  }

  .contact-form-heading{
    font-size: var(--cf-h2);
    font-weight: 700;
    line-height: 1.2;
    margin:0 0 8px 0;
    letter-spacing: -0.01em;
  }

  .contact-form-subtext{
    font-size: 14px;
    font-weight: 400;
    color: {{ section.settings.muted_text_color }};
    margin:0 0 32px 0;
    line-height: 1.5;
  }
  .required-indicator{ color:#ef4444; margin-left:2px; }

  /* Fields layout */
  .contact-fields-row{
    display:grid;
    grid-template-columns: 1fr;
    gap: 20px;
    margin-bottom: 20px;
  }
  @media screen and (min-width: 750px){
    .contact-fields-row{ grid-template-columns: 1fr 1fr; }
  }

  .contact-field{ margin-bottom: 20px; }

  .contact-field-label{
    display:block;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: {{ section.settings.muted_text_color }};
    margin-bottom: 8px;
  }

  .contact-field-input, .contact-field-select {
    width:100%;
    height: 52px;
    padding: 0 16px;
    font-size: 15px;
    color: {{ section.settings.text_color }};
    background-color: {{ section.settings.input_bg }};
    border: 1px solid {{ section.settings.input_border }};
    border-radius: var(--cf-radius);
    transition: all .2s ease;
    font-family: inherit;
    appearance: none;
  }
  .contact-field-input:focus, .contact-field-select:focus{
    outline:none;
    border-color: {{ section.settings.accent_color }};
    box-shadow: 0 0 0 1px {{ section.settings.accent_color }};
  }
  
  .contact-field-select {
    background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23999%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
    background-repeat: no-repeat;
    background-position: right 16px top 50%;
    background-size: 10px auto;
  }

  .contact-field-textarea{
    width:100%;
    min-height: 160px;
    padding: 14px 16px;
    font-size: 15px;
    color: {{ section.settings.text_color }};
    background-color: {{ section.settings.input_bg }};
    border: 1px solid {{ section.settings.input_border }};
    border-radius: var(--cf-radius);
    transition: all .2s ease;
    font-family: inherit;
    resize: vertical;
    line-height: 1.5;
  }
  .contact-field-textarea:focus{
    outline:none;
    border-color: {{ section.settings.accent_color }};
    box-shadow: 0 0 0 1px {{ section.settings.accent_color }};
  }

  /* DEVICE SELECTION CARDS */
  .device-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    margin-bottom: 24px;
  }
  @media(min-width: 600px) {
    .device-grid { grid-template-columns: repeat(4, 1fr); }
  }

  .device-radio-input { display: none; }

  .device-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: #fff;
    border: 1px solid {{ section.settings.input_border }};
    border-radius: 12px;
    padding: 16px 8px;
    cursor: pointer;
    transition: all .2s ease;
    text-align: center;
    height: 100%;
  }
  .device-card:hover {
    border-color: {{ section.settings.accent_color }};
    background-color: #f9fafb;
  }
  
  .device-radio-input:checked + .device-card {
    border-color: {{ section.settings.accent_color }};
    box-shadow: 0 0 0 1px {{ section.settings.accent_color }};
    background-color: #f0f9ff;
  }

  .device-icon {
    width: 32px;
    height: 32px;
    margin-bottom: 10px;
    object-fit: contain;
  }
  
  .device-name {
    font-size: 13px;
    font-weight: 600;
    color: {{ section.settings.text_color }};
  }

  /* Submit Button */
  .contact-submit-btn{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    padding: 12px 32px;
    font-size: 15px;
    font-weight: 600;
    color:#fff;
    background-color: #1f2937;
    border:none;
    border-radius: 6px;
    cursor:pointer;
    transition: background-color .2s ease;
    font-family: inherit;
    min-width: 140px;
    height: 46px;
    margin-top: 10px;
  }
  .contact-submit-btn:hover{ background-color: #111827; }

  .contact-success-message{ text-align:center; padding: 56px 24px; }
  .contact-error-banner{
    padding: 14px 16px;
    background-color:#fef2f2;
    border-radius: var(--cf-radius);
    margin-bottom: 20px;
    color:#b91c1c;
  }
  
  /* Optgroups */
  optgroup { font-weight: 700; color: #333; }
  option { font-weight: 400; color: #000; padding: 5px;}
{%- endstyle -%}

<div class="contact-section-{{ section.id }}">
  <div class="contact-wrapper">
    <div class="contact-info-panel">
      {%- if section.settings.badge_text != blank -%}
        <span style="font-size:12px; font-weight:700; text-transform:uppercase; color:{{ section.settings.accent_color }}; display:block; margin-bottom:12px;">{{ section.settings.badge_text }}</span>
      {%- endif -%}
      
      <h1 class="contact-info-heading">{{ section.settings.info_heading }}</h1>
      <p class="contact-info-description">{{ section.settings.info_description }}</p>

      <div class="contact-details">
        {%- if section.settings.email != blank -%}
          <div class="contact-detail-item">
            <div class="contact-detail-icon">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" /></svg>
            </div>
            <div>
              <p class="contact-detail-label">Email</p>
              <a href="mailto:{{ section.settings.email }}" class="contact-detail-value">{{ section.settings.email }}</a>
            </div>
          </div>
        {%- endif -%}
        
        {%- if section.settings.phone != blank -%}
          <div class="contact-detail-item">
            <div class="contact-detail-icon">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" /></svg>
            </div>
            <div>
              <p class="contact-detail-label">Phone</p>
              <a href="tel:{{ section.settings.phone }}" class="contact-detail-value">{{ section.settings.phone }}</a>
            </div>
          </div>
        {%- endif -%}
        
        {%- if section.settings.address != blank -%}
          <div class="contact-detail-item">
            <div class="contact-detail-icon">
               <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" /><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" /></svg>
            </div>
            <div>
              <p class="contact-detail-label">Address</p>
              <p class="contact-detail-value">{{ section.settings.address }}</p>
            </div>
          </div>
        {%- endif -%}

        <div class="contact-detail-item">
          <div class="contact-detail-icon">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
          </div>
          <div>
            <p class="contact-detail-label">Opening Hours</p>
            <div class="hours-grid">
              <span class="hours-day">Monday:</span> <span class="hours-time">9am - 6pm</span>
              <span class="hours-day">Tuesday:</span> <span class="hours-time">9am - 6pm</span>
              <span class="hours-day">Wednesday:</span> <span class="hours-time">9am - 6pm</span>
              <span class="hours-day">Thursday:</span> <span class="hours-time">9am - 6pm</span>
              <span class="hours-day">Friday:</span> <span class="hours-time">10am - 6pm</span>
              <span class="hours-day">Saturday:</span> <span class="hours-time">Closed</span>
              <span class="hours-day">Sunday:</span> <span class="hours-time">Closed</span>
            </div>
          </div>
        </div>

      </div>
    </div>

    <div class="contact-form-panel">
      <div class="contact-form-container">
        {%- form 'contact', id: 'ContactForm' -%}
          {%- if form.posted_successfully? -%}
            <div class="contact-success-message">
              <h2 style="font-size:24px; font-weight:700; margin-bottom:10px;">Message Sent!</h2>
              <p style="color:{{ section.settings.muted_text_color }}">We'll get back to you shortly with your quote.</p>
            </div>
          {%- else -%}
            
            <h2 class="contact-form-heading">Send us a message</h2>
            <p class="contact-form-subtext">
              Fields marked with <span class="required-indicator">*</span> are required
            </p>

            {%- if form.errors -%}
              <div class="contact-error-banner">
                <p>Please check the fields and try again.</p>
              </div>
            {%- endif -%}

            <div class="contact-fields-row">
              <div style="margin-bottom:0;">
                <label class="contact-field-label" for="ContactForm-name">NAME<span class="required-indicator">*</span></label>
                <input class="contact-field-input" type="text" id="ContactForm-name" name="contact[name]" value="{% if form.name %}{{ form.name }}{% elsif customer %}{{ customer.name }}{% endif %}" placeholder="Your full name" required>
              </div>
              <div style="margin-bottom:0;">
                <label class="contact-field-label" for="ContactForm-email">EMAIL<span class="required-indicator">*</span></label>
                <input class="contact-field-input" type="email" id="ContactForm-email" name="contact[email]" value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}" placeholder="your@email.com" required>
              </div>
            </div>

            <div class="contact-field">
              <label class="contact-field-label" for="ContactForm-phone">PHONE NUMBER<span class="required-indicator">*</span></label>
              <input class="contact-field-input" type="tel" id="ContactForm-phone" name="contact[phone]" value="{% if form.phone %}{{ form.phone }}{% elsif customer %}{{ customer.phone }}{% endif %}" placeholder="+44 (0)000 000 0000" required>
            </div>

            <div class="contact-field">
              <label class="contact-field-label">SELECT DEVICE<span class="required-indicator">*</span></label>
              <div class="device-grid">
                
                <label>
                  <input type="radio" name="contact[device_type]" value="macbook" class="device-radio-input" onchange="updateModels(this.value)" required>
                  <div class="device-card">
                    <img src="https://cdn.shopify.com/s/files/1/0728/7111/7053/files/computer_1.png?v=1766439002" alt="MacBook" class="device-icon">
                    <span class="device-name">MacBook</span>
                  </div>
                </label>

                <label>
                  <input type="radio" name="contact[device_type]" value="iphone" class="device-radio-input" onchange="updateModels(this.value)">
                  <div class="device-card">
                    <img src="https://cdn.shopify.com/s/files/1/0728/7111/7053/files/smartphone.png?v=1766439001" alt="iPhone" class="device-icon">
                    <span class="device-name">iPhone</span>
                  </div>
                </label>

                <label>
                  <input type="radio" name="contact[device_type]" value="ipad" class="device-radio-input" onchange="updateModels(this.value)">
                  <div class="device-card">
                    <img src="https://cdn.shopify.com/s/files/1/0728/7111/7053/files/ipad.png?v=1766439002" alt="iPad" class="device-icon">
                    <span class="device-name">iPad</span>
                  </div>
                </label>

                <label>
                  <input type="radio" name="contact[device_type]" value="watch" class="device-radio-input" onchange="updateModels(this.value)">
                  <div class="device-card">
                    <img src="https://cdn.shopify.com/s/files/1/0728/7111/7053/files/apple.png?v=1766439001" alt="Apple Watch" class="device-icon">
                    <span class="device-name">Watch</span>
                  </div>
                </label>
              </div>
            </div>

            <div class="contact-fields-row">
              <div style="margin-bottom:0;">
                <label class="contact-field-label" for="ContactForm-model">MODEL<span class="required-indicator">*</span></label>
                <select class="contact-field-select" id="ContactForm-model" name="contact[device_model]" required disabled>
                  <option value="" disabled selected>Select Model...</option>
                </select>
              </div>
              <div style="margin-bottom:0;">
                <label class="contact-field-label" for="ContactForm-fault">FAULT CATEGORY<span class="required-indicator">*</span></label>
                <select class="contact-field-select" id="ContactForm-fault" name="contact[fault_area]" required>
                  <option value="" disabled selected>Select the main issue...</option>
                  <option value="Screen / Display">Screen / Display</option>
                  <option value="Power / Battery / Charging">Power / Battery / Charging</option>
                  <option value="Audio / Mic / Speaker">Audio / Microphone / Speaker</option>
                  <option value="Connectivity">Connectivity (WiFi / Bluetooth / Signal)</option>
                  <option value="Water Damage">Water Damage</option>
                  <option value="Data Recovery">Data Recovery</option>
                  <option value="Other">Other</option>
                </select>
              </div>
            </div>

            <div class="contact-field">
              <label class="contact-field-label" for="ContactForm-body">YOUR QUESTION<span class="required-indicator">*</span></label>
              <textarea class="contact-field-textarea" id="ContactForm-body" name="contact[body]" placeholder="Tell us about your device repair needs..." required>{{ form.body }}</textarea>
            </div>

            <button type="submit" class="contact-submit-btn">Send</button>
          {%- endif -%}
        {%- endform -%}
      </div>
    </div>
  </div>
</div>

<script>
  /* * DATA MODELS */
  const repairData = {
    // ---------------- MACBOOKS (Grouped) ----------------
    macbook: {
      "MacBook Pro": [
        "MacBook Pro 16-inch 'M4 Pro/Max' A3186/A3403 (2024)",
        "MacBook Pro 16-inch 'M3 Pro/Max' A2991 (2023)",
        "MacBook Pro 16-inch 'M2 Pro/Max' A2780 (2023)",
        "MacBook Pro 16-inch 'M1 Pro/Max' A2485 (2021)",
        "MacBook Pro 16-inch A2141 (2019)",
        "MacBook Pro 15-inch A1990 (2018-2019)",
        "MacBook Pro 15-inch A1707 (2016-2017)",
        "MacBook Pro 14-inch 'M4 Pro/Max' A3112/A3185/A3401 (2024)",
        "MacBook Pro 14-inch 'M3 Pro/Max' A2918/A2992 (2023)",
        "MacBook Pro 14-inch 'M2 Pro/Max' A2779 (2023)",
        "MacBook Pro 14-inch 'M1 Pro/Max' A2442 (2021)",
        "MacBook Pro 13-inch 'M2' A2338 (2022)",
        "MacBook Pro 13-inch 'M1' A2338 (2020)",
        "MacBook Pro 13-inch A2251 (2020)",
        "MacBook Pro 13-inch A2289 (2020)",
        "MacBook Pro 13-inch A2159 (2019)",
        "MacBook Pro 13-inch A1989 (2018-2019)"
      ],
      "MacBook Air": [
        "MacBook Air 15-inch 'M4' A3241 (2025)",
        "MacBook Air 15-inch 'M3' A3114 (2024)",
        "MacBook Air 15-inch 'M2' A2941 (2023)",
        "MacBook Air 13-inch 'M4' A3240 (2025)",
        "MacBook Air 13-inch 'M3' A3113 (2024)",
        "MacBook Air 13-inch 'M2' A2681 (2022)",
        "MacBook Air 13-inch 'M1' A2337 (2020)",
        "MacBook Air 13-inch A2179 (2020)",
        "MacBook Air 13-inch A1932 (2018-2019)"
      ]
    },

    // ---------------- IPHONES (Flat List) ----------------
    iphone: [
      "iPhone 16 Pro Max", "iPhone 16 Pro", "iPhone 16 Plus", "iPhone 16", "iPhone 16e",
      "iPhone 15 Pro Max", "iPhone 15 Pro", "iPhone 15 Plus", "iPhone 15",
      "iPhone 14 Pro Max", "iPhone 14 Pro", "iPhone 14 Plus", "iPhone 14",
      "iPhone SE 3rd Gen (2022)",
      "iPhone 13 Pro Max", "iPhone 13 Pro", "iPhone 13", "iPhone 13 Mini",
      "iPhone 12 Pro Max", "iPhone 12 Pro", "iPhone 12", "iPhone 12 Mini",
      "iPhone SE 2nd Gen (2020)",
      "iPhone 11 Pro Max", "iPhone 11 Pro", "iPhone 11"
    ],

    // ---------------- IPADS (Grouped) ----------------
    ipad: {
      "iPad Pro": [
        "iPad Pro 13 M4 (2024)", "iPad Pro 12.9 6th Gen M2 (2022)", "iPad Pro 12.9 5th Gen M1 (2021)",
        "iPad Pro 12.9 4th Gen (2020)", "iPad Pro 12.9 3rd Gen (2018)",
        "iPad Pro 11 M4 (2024)", "iPad Pro 11 4th Gen M2 (2022)", "iPad Pro 11 3rd Gen M1 (2021)",
        "iPad Pro 11 2nd Gen (2020)", "iPad Pro 11 1st Gen (2018)"
      ],
      "iPad Air": [
        "iPad Air 13 7th Gen 'M3' (2025)", "iPad Air 11 7th Gen 'M3' (2025)",
        "iPad Air 13 M2 (2024)", "iPad Air 11 M2 (2024)",
        "iPad Air 5th Gen (2022)", "iPad Air 4th Gen (2020)"
      ],
      "iPad": [
        "iPad 11th Gen (2025)", "iPad 10th Gen (2022)", "iPad 9th Gen (2021)",
        "iPad 8th Gen (2020)", "iPad 7th Gen (2019)"
      ],
      "iPad Mini": [
        "iPad Mini 7 (2024)", "iPad Mini 6 (2021)", "iPad Mini 5 (2019)"
      ]
    },

    // ---------------- WATCHES (Flat List) ----------------
    watch: [
      "Apple Watch Ultra 2", "Apple Watch Ultra",
      "Apple Watch Series 10 46MM", "Apple Watch Series 10 42MM",
      "Apple Watch Series 9 45MM", "Apple Watch Series 9 41MM",
      "Apple Watch Series 8 45MM", "Apple Watch Series 8 41MM",
      "Apple Watch SE 2nd Gen 44MM", "Apple Watch SE 2nd Gen 40MM",
      "Apple Watch Series 7 45MM", "Apple Watch Series 7 41MM",
      "Apple Watch Series 6 44MM", "Apple Watch Series 6 40MM",
      "Apple Watch Series 5 44MM", "Apple Watch Series 5 40MM",
      "Apple Watch SE 1st Gen 44MM", "Apple Watch SE 1st Gen 40MM"
    ]
  };

  function updateModels(selectedDevice) {
    const modelSelect = document.getElementById('ContactForm-model');

    // Reset Model Dropdown
    modelSelect.innerHTML = '<option value="" disabled selected>Select Model...</option>';
    modelSelect.disabled = true;

    if (selectedDevice && repairData[selectedDevice]) {
      modelSelect.disabled = false;
      const data = repairData[selectedDevice];

      if (Array.isArray(data)) {
        // Flat List
        data.forEach(model => {
          const option = document.createElement('option');
          option.value = model;
          option.textContent = model;
          modelSelect.appendChild(option);
        });
      } else {
        // Grouped List
        for (const [groupName, models] of Object.entries(data)) {
          const optgroup = document.createElement('optgroup');
          optgroup.label = groupName;
          models.forEach(model => {
            const option = document.createElement('option');
            option.value = model;
            option.textContent = model;
            optgroup.appendChild(option);
          });
          modelSelect.appendChild(optgroup);
        }
      }
    }
  }
</script>

{% schema %}
{
  "name": "Enhanced Contact Form",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Info Panel"
    },
    {
      "type": "text",
      "id": "badge_text",
      "label": "Badge Text",
      "default": "Repair Specialists"
    },
    {
      "type": "text",
      "id": "info_heading",
      "label": "Heading",
      "default": "Get in Touch"
    },
    {
      "type": "textarea",
      "id": "info_description",
      "label": "Description",
      "default": "Have a question about your device repair? We're here to help."
    },
    {
      "type": "text",
      "id": "email",
      "label": "Email",
      "default": "support@icorrect.com"
    },
    {
      "type": "text",
      "id": "phone",
      "label": "Phone",
      "default": "+44 20 1234 5678"
    },
    {
      "type": "text",
      "id": "address",
      "label": "Address",
      "default": "123 Repair Street, London"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "info_panel_bg",
      "label": "Info Panel BG",
      "default": "#f5f5f5"
    },
    {
      "type": "color",
      "id": "form_bg",
      "label": "Form Panel BG",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent Color",
      "default": "#3b82f6"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#171717"
    },
    {
      "type": "color",
      "id": "muted_text_color",
      "label": "Muted Text Color",
      "default": "#6b7280"
    },
    {
      "type": "color",
      "id": "input_bg",
      "label": "Input BG",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "input_border",
      "label": "Input Border",
      "default": "#e5e7eb"
    }
  ],
  "presets": [
    {
      "name": "Enhanced Contact Form"
    }
  ]
}
{% endschema %}